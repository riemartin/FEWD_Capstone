var client=function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e),n.d(e,"geoApi",(function(){return o})),n.d(e,"weatherbitApi",(function(){return r})),n.d(e,"pixabayApi",(function(){return a})),n.d(e,"postData",(function(){return i})),n.d(e,"counter",(function(){return c})),n.d(e,"uiUpdater",(function(){return l}));n(0),n(1),n(2),n(3),n(4);async function o(t){const e=`http://api.geonames.org/searchJSON?name=${t}&username=riema`,n=await fetch(e),o=await n.json(),a=o.geonames[0].lat,r=o.geonames[0].lng,i=o.geonames[0].countryName;return console.log(a),console.log(r),{lat:a,long:r,ctry:i}}async function a(t){const e=`https://pixabay.com/api/?key=18495402-9d414a90be0c31a451b166133&q=${t}&category=places&image_type=photo`,n=await fetch(e);return(await n.json()).hits[0]}async function r(t,e,n){const o=`https://api.weatherbit.io/v2.0/current?lat=${t}&lon=${e}&key=bb96717fa2134fb987f415ad4d5d5123`,a=`https://api.weatherbit.io/v2.0/forecast/daily?lat=${t}&lon=${e}&key=bb96717fa2134fb987f415ad4d5d5123`;if(n>1&&n<17){const t=await fetch(a),e=await t.json();console.log(e);const o=n-1;console.log(o+"if");return e.data[o]}{const t=await fetch(o),e=await t.json();console.log(e);const n=e.data[0];return console.log("else"),n}}async function i(t,e){const n=await fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o=await n.json();return console.log(o),o}function c(t){const e=new Date,n=Date.now(e);console.log(n);const o=Date.parse(t);console.log(o);const a=o-n;return Math.round(a/864e5)}function l(t){document.getElementById("geo").innerHTML=`<div id="geo" class="result">You trip to <bold> ${t.destination}</bold> \n    on the <bold>${t.traveldate_string}:</bold><br>\n    Only ${t.countdown} days left!</div>`,document.getElementById("weather").innerHTML=`The weather will be ${t.description} with temperatures around ${t.temp} Degrees!<br><br><br>\n    <div> <img src="${t.img}" alt="Destination"></div>`}const s={};async function d(t){const e=document.getElementById("destination").value;localStorage.setItem("dest_server",e);const n=document.getElementById("traveldate").value;s.traveldate_string=n;const d=n.split("/"),u=d[2]+"-"+d[1]+"-"+d[0],f=new Date(u);localStorage.setItem("date_server",n),s.destination=e,s.traveldate=f;const g=c(f);s.countdown=g+1;const p=await o(e);s.lat=p.lat,console.log(s.lat),s.long=p.long,console.log(s.long),s.ctry=p.ctry;const m=await a(e);console.log(m),s.img=m.webformatURL;const y=await r(s.lat,s.long,s.countdown);s.weather=y,s.temp=y.temp,s.description=y.weather.description,i("/save",{destination:s.destination,traveldate:s.traveldate,countdown:s.countdown,description:s.description,temperature:s.temp,img:s.img}),l(s)}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("generate").addEventListener("click",d)}),document.getElementById("destination").value=localStorage.getItem("dest_server"),document.getElementById("traveldate").value=localStorage.getItem("date_server")}]);